# NFT Parser

## üíñ –ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ –º–µ–Ω–µ

–Ø–∫—â–æ —Ü–µ–π –ø–∞—Ä—Å–µ—Ä –±—É–≤ –¥–ª—è –≤–∞—Å –∫–æ—Ä–∏—Å–Ω–∏–º —ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –º–µ–Ω–µ (—ñ –ö–æ–º—É“ë—ñ üêà‚Äç‚¨õ),  
–±—É–¥—å –ª–∞—Å–∫–∞, —Ä–æ–∑–≥–ª—è–Ω—å—Ç–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑—Ä–æ–±–∏—Ç–∏ –¥–æ–Ω–∞—Ç:

[–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –ö–æ–º—É“ë—ñ](https://cppsharp.github.io/#donate)

<img src="files/komugi_and_komaru.png" alt="Komugi and Komaru" width="150" style="margin-top:10px;"/>

–ë—É–¥—å-—è–∫–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥—É–∂–µ —Ü—ñ–Ω—É—î—Ç—å—Å—è! –î—è–∫—É—é! üôè



## üìã –ó–º—ñ—Å—Ç

1. [–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å](#–∫–æ—Ä–æ—Ç–∫–∏–π-–æ–ø–∏—Å)
2. [–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ](#–æ—Å–Ω–æ–≤–Ω—ñ-–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ)
3. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-—Ç–∞-–∑–∞–ø—É—Å–∫)
4. [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
5. [–ï—Ç–∞–ø–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó](#–µ—Ç–∞–ø–∏-–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è-—Ç–∞-—Ñ—É–Ω–∫—Ü—ñ—ó)
6. [–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∑–∞–ø—É—Å–∫–∏](#–ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ-–∑–∞–ø—É—Å–∫–∏)
7. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π)
8. [–í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º](#–≤–∏—Ä—ñ—à–µ–Ω–Ω—è-–ø—Ä–æ–±–ª–µ–º)

---

## üßæ –ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å

NFT Gifts Parser ‚Äî —Ü–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–∏—Ö NFT (—á–µ—Ä–µ–∑ t.me/{slug}). –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –º–æ–¥–µ–ª—ñ, —Ñ–æ–Ω–∏, —Å–∏–º–≤–æ–ª–∏ —Ç–∞ —ó—Ö–Ω—ñ —à–∞–Ω—Å–∏ –≤–∏–ø–∞–¥—ñ–Ω–Ω—è, –∑–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö —ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —è–∫ –≤—ñ–∑—É–∞–ª—å–Ω—ñ, —Ç–∞–∫ —ñ –∞–Ω—ñ–º–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏ —É –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –ø–∞–ø–∫–∏.

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º rate limit
* –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ç—Ä–∏–±—É—Ç—ñ–≤ NFT: –º–æ–¥–µ–ª—å, —Ñ–æ–Ω, —Å–∏–º–≤–æ–ª, —à–∞–Ω—Å –≤–∏–ø–∞–¥—ñ–Ω–Ω—è
* –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É MySQL (—á–µ—Ä–µ–∑ aiomysql)
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–µ–≤‚Äô—é (PNG), –∞–Ω—ñ–º–∞—Ü—ñ–π (TGS) —Ç–∞ JSON-–∞–Ω—ñ–º–∞—Ü—ñ–π
* –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ —Å–∏–º–≤–æ–ª—ñ–≤ (`symbols.json`) —ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö PNG
* –ó—Ä—É—á–Ω–∞ —Ç–∞ –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π –¥–ª—è –º–æ–¥–µ–ª–µ–π —ñ –ø–∞—Ç–µ—Ä–Ω—ñ–≤

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏

* Python **3.8+**
* Git
* –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ `venv` –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
* –§–∞–π–ª `.env` –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ ([–¥–∏–≤. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è))

### –ö—Ä–æ–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**

   ```bash
   git clone https://github.com/CppSharp/nft-gift-parser.git
   cd nft-parser
   ```

2. **–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ**

   ```bash
   python3 -m venv .venv
   source .venv/bin/activate  # Linux/macOS
   ```

3. **–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**

   ```bash
   py -m pip install --upgrade pip
   py -m pip install -r requirements.txt
   ``` 

4. **–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π**

   ```bash
   py setup_dirs.py
   ```

### –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞

* **–ë–∞–∑–æ–≤–∏–π –∑–∞–ø—É—Å–∫**:

  ```bash
  py main.py
  ```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–£—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É. –ü—Ä–∏–∫–ª–∞–¥:

```dotenv
DB_HOST=
DB_USER=
DB_PASSWORD=
DB_NAME=
DB_PORT=

NFT_NAME=
STORAGE_ROOT=./storage
BASE_URL=https://t.me/nft/{NFT_NAME_LOWER}-
TABLE_NAME={NFT_NAME_LOWER}

HEADERS=User-Agent: Mozilla/5.0
RATE_LIMIT=70
PERIOD=1
BATCH_SIZE=70
```

---

## üì• –ï—Ç–∞–ø–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó

1. **–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ NFT**

   * `get_current_quantity(session)`
2. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ NFT**

   * `parse_page(session, idx)`
3. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö**

   * `insert_nft_batch(pool, data_list, table_name)`
   * `asyncio` + `aiofiles`
4. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–∑—É–∞–ª—å–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤**

   * `download_model(name, idx, session)`

     * `get_first_frame_from_tgs_page`
     * `download_and_save_tgs_as_json`
     * `download_tgs_file`
5. **–û–±—Ä–æ–±–∫–∞ —Å–∏–º–≤–æ–ª—ñ–≤ —ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤**

   * `process_symbols(pool)` ‚Üí `download_transparent_png_from_svg_async`

---

## üèéÔ∏è –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∑–∞–ø—É—Å–∫–∏

–ü—Ä–∏–∫–ª–∞–¥: –ø—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å ‚Äî **600‚ÄØ–ú–ë** –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è/–≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: AMD Ryzen 7 5700X 8-Core, SSDPR-PX500-256-80-G2

–î–æ **10** —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤, —è–∫—ñ –≤–∏–∫–æ–Ω—É—é—Ç—å \~500 –∑–∞–ø–∏—Ç—ñ–≤/—Å–µ–∫ –∫–æ–∂–µ–Ω.
10 –º—ñ–ª—å–π–æ–Ω—ñ–≤ NFT –ø–æ–¥–∞—Ä—É–Ω–∫—ñ–≤ ‚Äî –∑–∞ \~7 –≥–æ–¥–∏–Ω.

> **–ü–æ—Ä–∞–¥–∞**: –ø–æ—á–∏–Ω–∞–π—Ç–µ –∑ NFT –∑ –Ω–∞–π–±—ñ–ª—å—à–∏–º supply, —â–æ–± –≤—Å—Ç–∏–≥–Ω—É—Ç–∏ –∑—ñ–±—Ä–∞—Ç–∏ –¥–∞–Ω—ñ –¥–æ –º–æ–∂–ª–∏–≤–∏—Ö –∑–º—ñ–Ω.

---
## üóÑÔ∏è–î–∞–Ω—ñ
## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

–¢–∞–±–ª–∏—Ü—è –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ NFT –∑ –¥–æ–∫–ª–∞–¥–Ω–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏.

| –ü–æ–ª–µ        | –¢–∏–ø       | –û–ø–∏—Å                                                     |
|-------------|-----------|----------------------------------------------------------|
| `id`        | INTEGER   | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä (PRIMARY KEY, AUTO_INCREMENT)   |
| `name`      | TEXT      | –ù–∞–∑–≤–∞ NFT                                                |
| `number`    | INTEGER   | –ù–æ–º–µ—Ä –∞–±–æ —ñ–Ω–¥–µ–∫—Å NFT                                     |
| `m`         | TEXT      | –ú–æ–¥–µ–ª—å                                                   |
| `bd`        | TEXT      | –§–æ–Ω                                                      |
| `s`         | TEXT      | –°–∏–º–≤–æ–ª                                                   |
| `mchance`   | INTEGER   | –®–∞–Ω—Å –≤–∏–ø–∞–¥—ñ–Ω–Ω—è –º–æ–¥–µ–ª—ñ (%)                                |
| `bdchance`  | INTEGER   | –®–∞–Ω—Å –≤–∏–ø–∞–¥—ñ–Ω–Ω—è —Ñ–æ–Ω—É (%)                                  |
| `schance`   | INTEGER   | –®–∞–Ω—Å –≤–∏–ø–∞–¥—ñ–Ω–Ω—è —Å–∏–º–≤–æ–ª—É (%)                               |
| `hex1`      | CHAR(7)   | –ö–æ–ª—ñ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ HEX (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `#FFFFFF`)               |
| `hex2`      | CHAR(7)   | –î—Ä—É–≥–∏–π –∫–æ–ª—ñ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ HEX                               |
| `s_in_dir`  | CHAR(6)   | –ö–æ–¥ —Å–∏–º–≤–æ–ª—É —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó                                 |


## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π

```text
nft-parser/
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ database.py
‚îú‚îÄ‚îÄ nft_utils.py
‚îú‚îÄ‚îÄ setup_dirs.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ storage/
    ‚îú‚îÄ‚îÄ models/
    ‚îÇ   ‚îî‚îÄ‚îÄ <NFT_NAME>/
    ‚îÇ       ‚îú‚îÄ‚îÄ img/
    ‚îÇ       ‚îú‚îÄ‚îÄ anim/
    ‚îÇ       ‚îî‚îÄ‚îÄ tgs/
    ‚îî‚îÄ‚îÄ patterns/
        ‚îú‚îÄ‚îÄ 00/
        ‚îú‚îÄ‚îÄ 01/
        ‚îî‚îÄ‚îÄ ...
        ‚îî‚îÄ‚îÄ ff/
```

---

## üöß –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

–ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:

- **429 Too Many Requests**  
  –ó–±—ñ–ª—å—à—ñ—Ç—å `PERIOD` –∞–±–æ –∑–º–µ–Ω—à—ñ—Ç—å `RATE_LIMIT` —É `.env`.

- **–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤ –¥–ª—è –∑–∞–ø–∏—Å—É**  
  –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç —ñ–∑ –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

- **–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**  
  –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –Ω–µ –∑–º—ñ–Ω–∏–ª–∞—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç—É.

- **–í—ñ–¥—Å—É—Ç–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞–±–æ –∞–Ω—ñ–º–∞—Ü—ñ—ó**  
  –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ —à–ª—è—Ö–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.
